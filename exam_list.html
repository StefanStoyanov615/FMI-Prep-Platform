<!doctype html>
<html lang="bg">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Избор на година</title>
        <link rel="stylesheet" href="css/style.css" />
    </head>
    <body>
        <nav>Архив с изпити</nav>

        <div class="list-container">
            <h1 id="page-title" class="page-title">Зареждане...</h1>
            <div id="list"></div>
        </div>

        <script>
            window.onload = async () => {
                const params = new URLSearchParams(window.location.search);
                const type = params.get("type") || "university";

                document.getElementById("page-title").innerText =
                    type === "university" ? "Кандидат-студентски изпити" : "Матури по Математика";

                try {
                    const res = await fetch("../registry.json");
                    const data = await res.json();
                    const exams = data[type] || [];
                    const listDiv = document.getElementById("list");

                    if (exams.length === 0) {
                        listDiv.innerHTML = "<p style='text-align:center'>Няма тестове.</p>";
                        return;
                    }

                    exams.forEach((exam) => {
                        const link = document.createElement("a");
                        link.className = "exam-item";
                        link.href = `practice.html?id=${exam.id}`;

                        link.innerHTML = `
                        <span>${exam.year}</span>
                        <span class="chevron">➜</span>
                    `;
                        listDiv.appendChild(link);
                    });
                } catch (e) {
                    console.error(e);
                }
            };
        </script>
    </body>
</html>
